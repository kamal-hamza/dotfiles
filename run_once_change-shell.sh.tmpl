#!/bin/bash

current_shell=$(basename "$SHELL")

if [ "$current_shell" != "bash" ]; then
    echo "Current shell is not bash. No changes made."
    exit 0
fi

if ! command -v zsh >/dev/null 2>&1; then
    echo "zsh is not installed. Please install zsh first."
    exit 1
fi

zsh_path=$(command -v zsh)

if ! grep -q "$zsh_path" /etc/shells; then
    echo "Adding $zsh_path to /etc/shells..."
    echo "$zsh_path" | sudo tee -a /etc/shells
fi

echo "Changing default shell to zsh..."
chsh -s "$zsh_path"

echo "Default shell changed to zsh. You may need to log out and log back in."
