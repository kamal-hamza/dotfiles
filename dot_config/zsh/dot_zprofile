export_if_exists() {
  local var_name="$1"
  local value="$2"
  if [[ -n ${(P)var_name} ]]; then
    export "$var_name=$value"
  fi
}


export_env() {
  local var_name="$1"
  local value="$2"
  local prepend_to_path="${3:-false}"

  # Only export if the path exists
  if [[ -d "$value" ]]; then
    export "$var_name=$value"
    if [[ "$prepend_to_path" == "true" ]]; then
      export PATH="$value:$PATH"
    fi
  fi
}

# Path exports
export_if_exists PATH "$HOME/.pyenv/bin:$PATH"
export_if_exists PATH "$HOME/.config/scripts/:$PATH"
export_if_exists PATH "$HOME/.config/walker/scripts/:$PATH"
export_if_exists PATH "$HOME/.cargo/bin:$PATH"
export_if_exists PATH "$HOME/.composer/vendor/bin:$PATH"
export_if_exists PATH "$HOME/.dotnet/tools:$PATH"
export_if_exists PATH "$HOME/.zvm/bin/zig:$PATH"
export_if_exists PATH "/Applications/Docker.app/Contents/Resources/bin:$PATH"
export_if_exists PATH "$DOTNET_ROOT/sdk:$PATH"
export_if_exists PATH "$DOTNET_ROOT:$PATH"
export_if_exists PATH "$HOME/.local/bin:$PATH"

# FZF Configuration
export_if_exists FZF_DEFAULT_COMMAND "fd --hidden --strip-cwd-prefix --exclude .git"
export_if_exists FZF_CTRL_T_COMMAND "$FZF_DEFAULT_COMMAND"
export_if_exists FZF_ALT_C_COMMAND "fd --type=d --hidden --strip-cwd-prefix --exclude .git"
export_if_exists FZF_CTRL_T_OPTS "--preview 'bat --color=always -n --line-range :500 {}'"
export_if_exists FZF_ALT_C_OPTS "--preview 'eza --icons=always --tree --color=always {} | head -200'"
export_if_exists FZF_DEFAULT_OPTS '
--color=fg:15,bg:-1,hl:15,fg+:15,bg+:-1
--color=hl+:15:bold:underline,info:15,prompt:15,pointer:15:bold
--color=marker:15,spinner:15,header:15
--border=rounded --height=40% --reverse --cycle --bind "tab:down,shift-tab:up"
'

# Variable Exports
export_if_exists EDITOR "zed"
export_if_exists FZF_TMUX_OPTS " -p90%,70% "
export_if_exists GIT_CONFIG_GLOBAL "$HOME/.config/git/config"
export TEXINPUTS="$HOME/.config/tex/latex//:"
export_if_exists NVM_DIR "$HOME/.nvm"
export_if_exists ZVM_INSTALL "$HOME/.zvm/self"
export_if_exists PATH "$PATH:$HOME/.zvm/bin"
export_if_exists PATH "$PATH:$ZVM_INSTALL/"
export_if_exists ZIG_PATH "$HOME/.zvm/bin/zig"
export_env "DOTNET_ROOT" "/usr/local/share/dotnet"
export_env "DOTNET_ROOT" "/usr/share/dotnet"
export_if_exists ODBCSYSINI "/etc"
export_if_exists FPATH "$HOME/.docker/completions:$FPATH"
export_if_exists PATH "/opt/mssql-tools18/bin:$PATH"
