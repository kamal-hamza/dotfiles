{{- if or (eq .chezmoi.osid "linux-arch") (eq .chezmoi.os "linux") -}}
#!/bin/sh

# Update system and install base-devel for AUR packages
sudo pacman -Syu --noconfirm base-devel

# Check for and install yay (AUR helper) if not present
if ! command -v yay &> /dev/null; then
    echo "yay not found, installing..."
    git clone https://aur.archlinux.org/yay.git
    (cd yay && makepkg -si --noconfirm)
    rm -rf yay
fi

# Packages from official repositories
pacman_packages=(
    "bat"
    "btop"
    "curl"
    "eza"
    "fd"
    "ffmpeg"
    "fzf"
    "git"
    "git-lfs"
    "go"
    "jq"
    "ripgrep"
    "tmux"
    "xz"
    "clang"
    "cmake"
    "lazygit"
    "lua-language-server"
    "make"
    "neovim"
    "php"
    "python-poetry"
    "pyenv"
    "rustup"
    "tldr"
    "zoxide"
    "yt-dlp"
    "kitty"
    "vlc"
    "gimp"
    "obs-studio"
    "wezterm"
    "docker"
    "noto-fonts" # A good default font collection
)

# Packages from the Arch User Repository (AUR)
aur_packages=(
    "golangci-lint-bin"
    "nvm"
    "visual-studio-code-bin"
    "spotify"
    "zed-editor"
    "chatgpt-desktop-bin" # There are several options, this is one
    "google-chrome"
    "ollama"
    "skim"
    "excalidraw-desktop"
    "whatsapp-for-linux"
)

# Install official packages
sudo pacman -S --needed --noconfirm "${pacman_packages[@]}"

# Install AUR packages
yay -S --needed --noconfirm "${aur_packages[@]}"

# Notes on specific packages:
# - logi-options+: There is no official Linux version. Solaar is a popular alternative.
#   You can install it with: sudo pacman -S solaar
# - mactex: This is specific to macOS. A good LaTeX distribution for Linux is TeX Live.
#   You can install it with: sudo pacman -S texlive-most
# - vmware-fusion: This is for macOS. The Linux equivalent is VMware Workstation.
#   You can install it from the AUR: yay -S vmware-workstation
# - rapidapi: This is available as a VS Code extension.
# - openjdk: You can choose a specific version, for example: sudo pacman -S jdk-openjdk

{{ end -}}
